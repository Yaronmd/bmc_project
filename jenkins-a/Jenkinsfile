pipeline {
    agent any

    stages {
        stage('Load .env') {
            steps {
                script {
                    def envProps = readProperties file: '/.env'

                    env.JENKINS_B_URL = envProps['JENKINS_B_URL']
                    env.TARGET_JOB_NAME = envProps['TARGET_JOB_NAME']
                    env.JENKINS_USER = envProps['JENKINS_USER']
                    env.JENKINS_API_TOKEN = envProps['JENKINS_API_TOKEN']
                }
            }
        }

        stage('Trigger Jenkins B') {
            steps {
                sh '/scripts/validate_ls.sh'
            }
        }
    }
}
